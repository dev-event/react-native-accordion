{"version":3,"names":["forwardRef","props","ref","useValidator","isArrow","DEFAULT_VISIBLE_CHEVRON","sizeIcon","DEFAULT_SIZE_TINT_CHEVRON","disabled","DEFAULT_DISABLED_HEAD_ACCORDION","colorIcon","DEFAULT_TINT_CHEVRON","initExpand","DEFAULT_EXPANDED_CONTENT_ACCORDION","handleIcon","styleChevron","contentHeight","DEFAULT_HEIGHT_CONTENT","renderContent","otherProperty","onChangeState","styleTouchable","configExpanded","styleContainer","configCollapsed","isStatusFetching","DEFAULT_PROGRESS_LOADING_API","isUnmountedContent","DEFAULT_UNMOUNTED_CONTENT_ACCORDION","activeBackgroundIcon","DEFAULT_ACTIVE_BACKGROUND_CHEVRON","initialMountedContent","DEFAULT_INITIAL_MOUNTED_CONTENT_ACCORDION","handleCustomTouchable","onAnimatedEndExpanded","onAnimatedEndCollapsed","handleContentTouchable","inactiveBackgroundIcon","DEFAULT_INACTIVE_BACKGROUND_CHEVRON","handleIndicatorFetching","layout","onLayout","useLayout","open","useSharedValue","isUnmounted","setUnmountedContent","useState","isMounted","setMounted","handleHeightContent","useMemo","height","DEFAULT_CONTENT_HEIGHT","size","useImperativeHandle","openAccordion","useEffect","runOnUI","value","progress","useDerivedValue","withTiming","created","unmount","style","useAnimatedStyle","opacity","useCallback","undefined","runOnJS","hasLoader","styles","indicator","renderHeader","header","content","contentStyle","container","containerAnimatedStyle"],"sources":["accordion.tsx"],"sourcesContent":["import React, {\n  useCallback,\n  forwardRef,\n  useMemo,\n  useEffect,\n  useState,\n  useImperativeHandle,\n  Ref,\n} from 'react';\nimport {\n  ActivityIndicator,\n  TouchableWithoutFeedback,\n  View,\n  ViewStyle,\n} from 'react-native';\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  useDerivedValue,\n  withTiming,\n  runOnUI,\n  runOnJS,\n} from 'react-native-reanimated';\nimport Chevron from '../chevron';\nimport type { IAccordionProps } from './types';\nimport { styles } from './styles';\nimport { useLayout, useValidator } from '../hooks';\nimport {\n  DEFAULT_INITIAL_MOUNTED_CONTENT_ACCORDION,\n  DEFAULT_UNMOUNTED_CONTENT_ACCORDION,\n  DEFAULT_INACTIVE_BACKGROUND_CHEVRON,\n  DEFAULT_EXPANDED_CONTENT_ACCORDION,\n  DEFAULT_ACTIVE_BACKGROUND_CHEVRON,\n  DEFAULT_DISABLED_HEAD_ACCORDION,\n  DEFAULT_PROGRESS_LOADING_API,\n  DEFAULT_SIZE_TINT_CHEVRON,\n  DEFAULT_VISIBLE_CHEVRON,\n  DEFAULT_HEIGHT_CONTENT,\n  DEFAULT_TINT_CHEVRON,\n  DEFAULT_CONTENT_HEIGHT,\n} from './constant';\n\nexport default forwardRef((props: IAccordionProps, ref: Ref<any>) => {\n  useValidator(props);\n  //props configuration\n  const {\n    isArrow = DEFAULT_VISIBLE_CHEVRON,\n    sizeIcon = DEFAULT_SIZE_TINT_CHEVRON,\n    disabled = DEFAULT_DISABLED_HEAD_ACCORDION,\n    colorIcon = DEFAULT_TINT_CHEVRON,\n    initExpand = DEFAULT_EXPANDED_CONTENT_ACCORDION,\n    handleIcon,\n    styleChevron,\n    contentHeight = DEFAULT_HEIGHT_CONTENT,\n    renderContent,\n    otherProperty,\n    onChangeState,\n    styleTouchable,\n    configExpanded,\n    styleContainer,\n    configCollapsed,\n    isStatusFetching = DEFAULT_PROGRESS_LOADING_API,\n    isUnmountedContent = DEFAULT_UNMOUNTED_CONTENT_ACCORDION,\n    activeBackgroundIcon = DEFAULT_ACTIVE_BACKGROUND_CHEVRON,\n    initialMountedContent = DEFAULT_INITIAL_MOUNTED_CONTENT_ACCORDION,\n    handleCustomTouchable,\n    onAnimatedEndExpanded,\n    onAnimatedEndCollapsed,\n    handleContentTouchable,\n    inactiveBackgroundIcon = DEFAULT_INACTIVE_BACKGROUND_CHEVRON,\n    handleIndicatorFetching,\n  } = props;\n\n  const [layout, onLayout] = useLayout(0);\n  const open = useSharedValue(initExpand);\n  const [isUnmounted, setUnmountedContent] =\n    useState<boolean>(isUnmountedContent);\n  const [isMounted, setMounted] = useState<boolean>(initialMountedContent);\n\n  const handleHeightContent = useMemo(\n    () =>\n      renderContent === null\n        ? 0\n        : contentHeight || layout.height || DEFAULT_CONTENT_HEIGHT,\n    [contentHeight, layout.height, renderContent]\n  );\n\n  const size = useSharedValue(handleHeightContent);\n\n  useImperativeHandle(ref, () => ({\n    openAccordion,\n  }));\n\n  useEffect(() => {\n    runOnUI(() => {\n      'worklet';\n      if (initExpand && isMounted && handleHeightContent) {\n        size.value = handleHeightContent;\n      }\n    })();\n  }, [handleHeightContent, initExpand, isMounted, size]);\n\n  useEffect(() => {\n    runOnUI(() => {\n      'worklet';\n      if (!isStatusFetching && handleHeightContent) {\n        size.value = handleHeightContent;\n      }\n    })();\n  }, [handleHeightContent, isStatusFetching, size]);\n\n  const progress = useDerivedValue(() =>\n    open.value\n      ? withTiming(1, configExpanded, created)\n      : withTiming(0, configCollapsed, unmount)\n  );\n\n  const style = useAnimatedStyle<Animated.AnimatedStyleProp<ViewStyle>>(() => ({\n    height: size.value * progress.value + 1,\n    opacity: progress.value === 0 ? 0 : 1,\n  }));\n\n  const created = useCallback(() => {\n    if (onAnimatedEndExpanded !== undefined) {\n      runOnJS(onAnimatedEndExpanded)();\n    }\n  }, [onAnimatedEndExpanded]);\n\n  const unmount = useCallback(() => {\n    if (onAnimatedEndCollapsed !== undefined) {\n      runOnJS(onAnimatedEndCollapsed)();\n    }\n\n    if (isUnmountedContent) {\n      runOnJS(setUnmountedContent)(true);\n      return;\n    }\n  }, [isUnmountedContent, onAnimatedEndCollapsed]);\n\n  const openAccordion = useCallback(() => {\n    if (size.value === 0) {\n      if (!isMounted) setMounted(true);\n      runOnUI(setUnmountedContent)(false);\n      runOnUI(() => {\n        'worklet';\n        size.value = handleHeightContent;\n      })();\n    }\n    open.value = !open.value;\n    onChangeState && onChangeState(!open.value);\n  }, [handleHeightContent, isMounted, onChangeState, open, size]);\n\n  const hasLoader = useMemo(\n    () =>\n      isStatusFetching ? (\n        handleIndicatorFetching ? (\n          handleIndicatorFetching()\n        ) : (\n          <ActivityIndicator\n            size=\"small\"\n            color=\"#AAAAAA\"\n            style={styles.indicator}\n          />\n        )\n      ) : (\n        <Chevron\n          sizeIcon={sizeIcon}\n          progress={progress}\n          colorIcon={colorIcon}\n          handleIcon={handleIcon}\n          styleChevron={styleChevron}\n          activeBackgroundIcon={activeBackgroundIcon}\n          inactiveBackgroundIcon={inactiveBackgroundIcon}\n        />\n      ),\n    [\n      progress,\n      sizeIcon,\n      colorIcon,\n      handleIcon,\n      styleChevron,\n      isStatusFetching,\n      activeBackgroundIcon,\n      inactiveBackgroundIcon,\n      handleIndicatorFetching,\n    ]\n  );\n\n  const renderHeader = useCallback(() => {\n    if (handleCustomTouchable === null) {\n      return null;\n    }\n    return handleCustomTouchable !== undefined ? (\n      handleCustomTouchable()\n    ) : (\n      <Animated.View style={[styles.header, styleTouchable]}>\n        {handleContentTouchable ? handleContentTouchable() : null}\n        {isArrow ? hasLoader : null}\n      </Animated.View>\n    );\n  }, [\n    isArrow,\n    hasLoader,\n    styleTouchable,\n    handleCustomTouchable,\n    handleContentTouchable,\n  ]);\n\n  const content = useCallback(() => {\n    if (isUnmounted && !open.value) {\n      return null;\n    }\n\n    return isMounted && renderContent ? renderContent() : null;\n  }, [isMounted, isUnmounted, open.value, renderContent]);\n\n  const contentStyle = useMemo<ViewStyle[]>(\n    () => [styles.container, styleContainer],\n    [styleContainer]\n  );\n  const containerAnimatedStyle = useMemo<\n    Animated.AnimatedStyleProp<ViewStyle>[]\n  >(() => [styles.content, style], [style]);\n\n  return (\n    <>\n      <TouchableWithoutFeedback\n        onPress={openAccordion}\n        disabled={disabled || isStatusFetching}\n        {...otherProperty}\n      >\n        {renderHeader()}\n      </TouchableWithoutFeedback>\n\n      <Animated.View style={containerAnimatedStyle}>\n        <View onLayout={onLayout} style={contentStyle}>\n          {content()}\n        </View>\n      </Animated.View>\n    </>\n  );\n});\n"],"mappings":"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"}